"use strict";(self.webpackChunkHelpDesk=self.webpackChunkHelpDesk||[]).push([[991],{4535:(h,p,s)=>{s.d(p,{I:()=>a});var r=s(1135),d=s(8256);class a{constructor(){this.feedbackPath=new r.X("")}}a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})},8496:(h,p,s)=>{s.d(p,{B:()=>a});var r=s(1135),d=s(8256);class a{constructor(){this.ticketOverview=new r.X({id:0,name:"",createdOn:"",status:"",category:{id:"",name:""},urgency:"",desired_date:"",owner:"",approver:"",assignee:"",description:""}),this.ticketName=new r.X(""),this.actionByFeedback=new r.X("")}}a.\u0275fac=function(o){return new(o||a)},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})},4588:(h,p,s)=>{function r(d){return""!==d.value&&-1===d.value?.search('^[A-Za-z0-9~."(),:;<>@!#$%&*+-/=?^_`{|}\\]\\[ ]+$')?{textValid:!0}:null}s.d(p,{I:()=>r})},6991:(h,p,s)=>{s.r(p),s.d(p,{FeedbackModule:()=>k});var r=s(6895),d=s(4418),a=s(3042),e=s(8256),o=s(433),F=s(4588),C=s(2687),x=s(2216);function w(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1,"Please, raet your satisfaction with the solution"),e.qZA())}function M(i,n){1&i&&(e.TgZ(0,"div"),e._uU(1,"Feedback:"),e.qZA())}function O(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",15),e.NdJ("click",function(){const m=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.getRate(m))}),e._uU(2,"\u2606"),e.qZA()()}}function P(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",16),e.NdJ("click",function(){const m=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.getRate(m))}),e._uU(2,"\u2605"),e.qZA()()}}function T(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"fa-icon",17),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.clickon())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("icon",t.exclam)}}function I(i,n){if(1&i&&(e.TgZ(0,"div",18)(1,"div")(2,"button",19),e._uU(3,"Submit"),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",null==t.text?null:t.text.errors)}}const y=function(i){return{invalid:i}};class g{constructor(){this.name="",this.path="",this.url="",this.clickMess=new e.vpe,this.newFeedback=new e.vpe,this.rate=0,this.stars=[1,2,3,4,5],this.rates=[],this.readable=!1,this.exclam=C.xHz,this.messages=[],this.feedbackForm=new o.cw({text:new o.NI("",[F.I,o.kI.maxLength(500)])})}get text(){return this.feedbackForm.get("text")}getRate(n){if("leave-feedback"===this.url){this.rate=n,this.rates=[];for(let t=0;t<n;t++)this.rates.push(this.stars[t])}}clickon(){this.messages=[],this.text?.errors?.textValid&&this.messages.push("Feedback character error"),this.text?.errors?.maxLength&&this.messages.push("Feedback exceed the 500 character limit"),this.clickMess.emit(this.messages)}addFeedback(){this.feedbackForm.valid&&this.newFeedback.emit({rate:this.rate,text:this.feedbackForm.controls.text.value})}getFeedback(n){if("view-feedback"===this.url){this.readable=!0;for(let t=0;t<n.rate;t++)this.rates.push(this.stars[t]);this.feedbackForm.get("text")?.setValue(n.text)}}}g.\u0275fac=function(n){return new(n||g)},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-feedback-view"]],inputs:{name:"name",ticketId:"ticketId",path:"path",url:"url",feedback:"feedback"},outputs:{clickMess:"clickMess",newFeedback:"newFeedback"},ngContentSelectors:["*"],decls:24,vars:14,consts:[[1,"main-conteiner"],[1,"grid"],[1,"box-1"],[1,"green-button",3,"routerLink"],[1,"name"],[3,"formGroup","ngSubmit"],[1,"box-2"],[4,"ngIf"],[1,"box-2-2"],[1,"star"],[4,"ngFor","ngForOf"],[1,"box-3"],["formControlName","text",1,"input",3,"readOnly","ngClass"],[3,"icon","click",4,"ngIf"],["class","box-4",4,"ngIf"],[3,"click"],[1,"rate",3,"click"],[3,"icon","click"],[1,"box-4"],[1,"green-button",3,"disabled"]],template:function(n,t){1&n&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"button",3),e._uU(5,"Back"),e.qZA()(),e.TgZ(6,"div",4),e._uU(7),e.qZA()(),e.TgZ(8,"form",5),e.NdJ("ngSubmit",function(){return t.addFeedback()}),e.TgZ(9,"div",6),e.YNc(10,w,2,0,"div",7),e.YNc(11,M,2,0,"div",7),e.TgZ(12,"div",8)(13,"div",9),e.YNc(14,O,3,0,"div",10),e.qZA(),e.TgZ(15,"div",9),e.YNc(16,P,3,0,"div",10),e.qZA()()(),e.TgZ(17,"div",11),e._UZ(18,"textarea",12),e.TgZ(19,"div"),e.YNc(20,T,1,1,"fa-icon",13),e.qZA()(),e.YNc(21,I,4,1,"div",14),e.qZA()(),e.TgZ(22,"div"),e.Hsn(23),e.qZA()()),2&n&&(e.xp6(4),e.Q6J("routerLink",t.path),e.xp6(3),e.AsE("Ticket(",t.ticketId,") - ",t.name,""),e.xp6(1),e.Q6J("formGroup",t.feedbackForm),e.xp6(2),e.Q6J("ngIf","leave-feedback"===t.url),e.xp6(1),e.Q6J("ngIf","view-feedback"===t.url),e.xp6(3),e.Q6J("ngForOf",t.stars),e.xp6(2),e.Q6J("ngForOf",t.rates),e.xp6(2),e.Q6J("readOnly",t.readable)("ngClass",e.VKq(12,y,null==t.text?null:t.text.errors)),e.xp6(2),e.Q6J("ngIf",null==t.text?null:t.text.errors),e.xp6(1),e.Q6J("ngIf","leave-feedback"===t.url))},dependencies:[r.mk,r.sg,r.O5,d.rH,x.BN,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".grid[_ngcontent-%COMP%]{position:absolute;top:100px;padding:30px;width:100%;font-size:30px;color:#63637d;font-weight:700}.grid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:300px}.grid[_ngcontent-%COMP%]   .box-1[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1018px 300px;justify-content:center;justify-self:center;justify-items:center}.grid[_ngcontent-%COMP%]   .box-1[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{padding:10px;font-size:40px;word-wrap:break-word;width:1000px;text-align:center}.grid[_ngcontent-%COMP%]   .box-2[_ngcontent-%COMP%]{display:grid;padding:30px 300px;grid-template-rows:100px 220px;text-align:center}.grid[_ngcontent-%COMP%]   .box-2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px}.grid[_ngcontent-%COMP%]   .box-2[_ngcontent-%COMP%]   .box-2-2[_ngcontent-%COMP%]{position:relative;text-align:center}.grid[_ngcontent-%COMP%]   .box-2[_ngcontent-%COMP%]   .box-2-2[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{display:flex;position:absolute;cursor:pointer;flex-direction:row;font-size:100px;font-weight:100}.grid[_ngcontent-%COMP%]   .box-2[_ngcontent-%COMP%]   .box-2-2[_ngcontent-%COMP%]   .rate[_ngcontent-%COMP%]{color:#ffae00}.grid[_ngcontent-%COMP%]   .box-3[_ngcontent-%COMP%]{display:grid;column-gap:20px;grid-template-columns:1000px 50px;justify-content:center;align-items:center}.grid[_ngcontent-%COMP%]   .box-3[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:30px;margin-left:35px;height:250px;width:1000px}.grid[_ngcontent-%COMP%]   .box-3[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-left:35px;color:#e78c8c}.grid[_ngcontent-%COMP%]   .box-4[_ngcontent-%COMP%]{padding-top:80px;text-align:end}.invalid[_ngcontent-%COMP%]{outline:4px solid #e78c8c;border:none!important}"]});var J=s(8496),N=s(4535),v=s(529);class u{constructor(n){this.http=n}saveFeedback(n,t){const c=(new v.LE).set("ticketId",t);return this.http.post("http://localhost:8080/feedbacks",n,{params:c})}getFeedback(n){const t=(new v.LE).set("ticketId",n);return this.http.get("http://localhost:8080/feedbacks",{params:t})}}u.\u0275fac=function(n){return new(n||u)(e.LFG(v.eN))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});class f{constructor(n,t,c,l){this.ticketOverview=n,this.router=t,this.feedbackPath=c,this.feedbackService=l,this.feedback={rate:0,text:""},this.name="",this.path="",this.messages=[],this.url=t.url.substring(t.url.lastIndexOf("/")+1),this.getIdByPath(t.url),this.subPath=c.feedbackPath.subscribe(m=>this.path=m),this.getTicketName()}ngOnInit(){"view-feedback"===this.url&&this.getFeedback()}ngOnDestroy(){this.sub.unsubscribe(),this.subPath.unsubscribe()}clickMess(n){this.messages=n,this.mess.clickMessage()}getIdByPath(n){let t=n.substring(0,n.lastIndexOf("/")),c=Number(t.substring(t.lastIndexOf("/")+1));Number.isNaN(c)||(this.ticketId=c)}submit(n){this.feedbackService.saveFeedback(n,this.ticketId).subscribe({next:()=>{this.router.navigate(["ticketList"])}})}getTicketName(){this.sub="/ticketList"===this.path?this.ticketOverview.ticketName.subscribe(n=>this.name=n):this.ticketOverview.ticketOverview.subscribe(n=>this.name=n.name)}getFeedback(){this.feedbackService.getFeedback(this.ticketId).subscribe({next:n=>{n.length>0&&(this.feedback={rate:n[0].rate,text:n[0].text},this.feed.getFeedback(this.feedback))}})}}f.\u0275fac=function(n){return new(n||f)(e.Y36(J.B),e.Y36(d.F0),e.Y36(N.I),e.Y36(u))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-feedback"]],viewQuery:function(n,t){if(1&n&&(e.Gf(a.q,5),e.Gf(g,5)),2&n){let c;e.iGM(c=e.CRH())&&(t.mess=c.first),e.iGM(c=e.CRH())&&(t.feed=c.first)}},decls:2,vars:6,consts:[[3,"name","ticketId","feedback","path","url","clickMess","newFeedback"],[3,"messages"]],template:function(n,t){1&n&&(e.TgZ(0,"app-feedback-view",0),e.NdJ("clickMess",function(l){return t.clickMess(l)})("newFeedback",function(l){return t.submit(l)}),e._UZ(1,"app-message",1),e.qZA()),2&n&&(e.Q6J("name",t.name)("ticketId",t.ticketId)("feedback",t.feedback)("path",t.path)("url",t.url),e.xp6(1),e.Q6J("messages",t.messages))},dependencies:[a.q,g]});const A=[{path:"leave-feedback",component:f,title:"HelpDesk Leave Feedback"},{path:"view-feedback",component:f,title:"HelpDesk View Feedback"}];class b{}b.\u0275fac=function(n){return new(n||b)},b.\u0275mod=e.oAB({type:b}),b.\u0275inj=e.cJS({imports:[d.Bz.forChild(A),d.Bz]});var V=s(2770);class k{}k.\u0275fac=function(n){return new(n||k)},k.\u0275mod=e.oAB({type:k}),k.\u0275inj=e.cJS({imports:[r.ez,b,x.uH,o.UX,V.O]})}}]);